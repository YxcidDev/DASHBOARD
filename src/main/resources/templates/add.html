<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Formulario de Productos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-4">
      <h1>Formulario de Productos</h1>
      <form
        th:action="@{/product}"
        th:object="${product}"
        method="post"
        enctype="multipart/form-data"
        id="productForm"
      >
        <input type="hidden" th:field="*{id}" />
        <input type="hidden" th:field="*{img}" />
        <div class="mb-3">
          <label for="name" class="form-label">Nombre:</label>
          <input
            type="text"
            th:field="*{name}"
            class="form-control"
            id="name"
            name="name"
            pattern="[A-Za-zÁÉÍÓÚáéíóúñÑ\s]{3,50}"
            minlength="3"
            maxlength="50"
            required
          />
        </div>
        <div class="mb-3">
          <label for="description" class="form-label">Descripción:</label>
          <input
            type="text"
            th:field="*{description}"
            class="form-control"
            id="description"
            name="description"
            minlength="10"
            maxlength="200"
            required
          />
        </div>
        <div class="mb-3">
          <label for="price" class="form-label">Precio:</label>
          <input
            type="number"
            th:field="*{price}"
            class="form-control"
            id="price"
            name="price"
            min="0"
            step="0.01"
            required
          />
        </div>
        <div class="mb-3">
          <label for="quantity" class="form-label">Cantidad:</label>
          <input
            type="number"
            th:field="*{quantity}"
            class="form-control"
            id="quantity"
            name="quantity"
            min="1"
            required
          />
        </div>
        <div class="mb-3">
          <label for="image" class="form-label">Imagen:</label>
          <input
            type="file"
            class="form-control"
            id="image"
            name="image"
            accept="image/*"
            required
          />
        </div>
        <button
          type="submit"
          class="btn btn-success"
          th:text="${product.id == null} ? 'Guardar Nuevo' : 'Actualizar'"
        >
          Guardar
        </button>
        <a th:href="@{/products}" class="btn btn-secondary">Cancelar</a>
      </form>
    </div>
  </body>
</html>
